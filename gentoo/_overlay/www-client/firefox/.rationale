# www-client/firefox-38.2.1
# cd /usr/portage; git checkout 17fc35dc06b8c4ecbe7b0c4ad2fd82a4ac366e79 www-client/firefox/firefox-31.8.0.ebuild
# ebuild www-client/firefox/firefox-31.8.0.ebuild digest

make -j9 -f client.mk configure
Traceback (most recent call last):
  File "/var/tmp/portage/www-client/firefox-38.2.1/work/mozilla-esr38/mach", line 148, in <module>
    main(sys.argv[1:])
  File "/var/tmp/portage/www-client/firefox-38.2.1/work/mozilla-esr38/mach", line 76, in main
    mach = get_mach()
  File "/var/tmp/portage/www-client/firefox-38.2.1/work/mozilla-esr38/mach", line 67, in get_mach
    mach = check_and_get_mach(dir_path)
  File "/var/tmp/portage/www-client/firefox-38.2.1/work/mozilla-esr38/mach", line 42, in check_and_get_mach
    return load_mach(dir_path, mach_path)
  File "/var/tmp/portage/www-client/firefox-38.2.1/work/mozilla-esr38/mach", line 30, in load_mach
    return mach_bootstrap.bootstrap(dir_path)
  File "/var/tmp/portage/www-client/firefox-38.2.1/work/mozilla-esr38/build/mach_bootstrap.py", line 217, in bootstrap
    mach.load_commands_from_file(os.path.join(mozilla_dir, path))
  File "/var/tmp/portage/www-client/firefox-38.2.1/work/mozilla-esr38/python/mach/mach/main.py", line 266, in load_commands_from_file
    imp.load_source(module_name, path)
  File "/var/tmp/portage/www-client/firefox-38.2.1/work/mozilla-esr38/addon-sdk/mach_commands.py", line 13, in <module>
    from mozbuild.base import (
  File "/var/tmp/portage/www-client/firefox-38.2.1/work/mozilla-esr38/python/mozbuild/mozbuild/base.py", line 17, in <module>
    from mach.mixin.process import ProcessExecutionMixin
  File "/var/tmp/portage/www-client/firefox-38.2.1/work/mozilla-esr38/python/mach/mach/mixin/process.py", line 29, in <module>
    raise Exception('Could not detect environment shell!')
Exception: Could not detect environment shell!
client.mk:201: /.mozconfig.mk: No such file or directory
Traceback (most recent call last):
  File "/var/tmp/portage/www-client/firefox-38.2.1/work/mozilla-esr38/mach", line 148, in <module>
    main(sys.argv[1:])
  File "/var/tmp/portage/www-client/firefox-38.2.1/work/mozilla-esr38/mach", line 76, in main
    mach = get_mach()
  File "/var/tmp/portage/www-client/firefox-38.2.1/work/mozilla-esr38/mach", line 67, in get_mach
    mach = check_and_get_mach(dir_path)
  File "/var/tmp/portage/www-client/firefox-38.2.1/work/mozilla-esr38/mach", line 42, in check_and_get_mach
    return load_mach(dir_path, mach_path)
  File "/var/tmp/portage/www-client/firefox-38.2.1/work/mozilla-esr38/mach", line 30, in load_mach
    return mach_bootstrap.bootstrap(dir_path)
  File "/var/tmp/portage/www-client/firefox-38.2.1/work/mozilla-esr38/build/mach_bootstrap.py", line 217, in bootstrap
    mach.load_commands_from_file(os.path.join(mozilla_dir, path))
  File "/var/tmp/portage/www-client/firefox-38.2.1/work/mozilla-esr38/python/mach/mach/main.py", line 266, in load_commands_from_file
    imp.load_source(module_name, path)
  File "/var/tmp/portage/www-client/firefox-38.2.1/work/mozilla-esr38/addon-sdk/mach_commands.py", line 13, in <module>
    from mozbuild.base import (
  File "/var/tmp/portage/www-client/firefox-38.2.1/work/mozilla-esr38/python/mozbuild/mozbuild/base.py", line 17, in <module>
    from mach.mixin.process import ProcessExecutionMixin
  File "/var/tmp/portage/www-client/firefox-38.2.1/work/mozilla-esr38/python/mach/mach/mixin/process.py", line 29, in <module>
    raise Exception('Could not detect environment shell!')
Exception: Could not detect environment shell!
/usr/bin/python2.7 /var/tmp/portage/www-client/firefox-38.2.1/work/mozilla-esr38/config/pythonpath.py -I /var/tmp/portage/www-client/firefox-38.2.1/work/mozilla-esr38/testing/mozbase/mozfile \
    /var/tmp/portage/www-client/firefox-38.2.1/work/mozilla-esr38/python/mozbuild/mozbuild/controller/clobber.py /var/tmp/portage/www-client/firefox-38.2.1/work/mozilla-esr38
Usage: clobber.py topsrcdir topobjdir
client.mk:334: recipe for target '/CLOBBER' failed
make: *** [/CLOBBER] Error 1
 * ERROR: www-client/firefox-38.2.1 failed (configure phase):
 *   emake failed
 *
 * If you need support, post the output of `emerge --info '=www-client/firefox-38.2.1'`,
 * the complete build log and the output of `emerge -pqv '=www-client/firefox-38.2.1'`.
 * The complete build log is located at '/var/tmp/portage/www-client/firefox-38.2.1/temp/build.log'.
 * The ebuild environment file is located at '/var/tmp/portage/www-client/firefox-38.2.1/temp/environment'.
 * Working directory: '/var/tmp/portage/www-client/firefox-38.2.1/work/mozilla-esr38'
 * S: '/var/tmp/portage/www-client/firefox-38.2.1/work/mozilla-esr38'
